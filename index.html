<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Title</title>
  <link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="./css/swiper.min.css">
  <script src="./js/index.js"></script>
  <script>
        if (!IsPC()) {
            window.location = "mobile.html"
        }
        window.οnresize = function () {
            if (!IsPC()) {
                window.location = "mobile.html"
            }
        }
    </script>
</head>

<body>
  <div class="mb"></div>
  <div class="vertiv">
    <div class="nav">
      <div class="nav-box">
        <div class="nav-logo">
          <img src="./img/logo.png" alt="">
        </div>
        <div class="nav-right">
          <div class="nav-item active">
            首页
          </div>
          <div class="nav-item">
            大会介绍
          </div>
          <div class="nav-item">
            线上展厅
          </div>
          <div class="nav-item">
            大会议程
          </div>
          <div class="nav-item">
            精彩回顾
          </div>
          <div class="nav-item">
            往届回顾
          </div>
        </div>
      </div>
    </div>
    <div class="vertiv-content">
      <div class="swiper-container" id='content'>
        <div class="swiper-wrapper">
          <div class="vertiv-item swiper-slide one">
            <div class="light-box">
              <img src="./img/light1.png" alt="" class="light1 abs">
              <img src="./img/light2.png" alt="" class="light2 abs">
              <img src="./img/light3.png" alt="" class="light3 abs">
              <img src="./img/light4.png" alt="" class="light4 abs">
              <img src="./img/light5.png" alt="" class="light5 abs">
              <img src="./img/light6.png" alt="" class="light6 abs">
              <img src="./img/light7.png" alt="" class="light7 abs">
            </div>
            <div class="vertiv-item-box">
              <div class="year abs">
                <img src="./img/page1_2020.png" alt="">
                <img src="./img/light_2020.png" alt="" class="light20 abs">
              </div>
              <div class="title abs">
                <img src="./img/page1_title.png" alt="">
              </div>
              <div class="vertiv_title abs">
                <img src="./img/page1_vertiv_title.png" alt="">
              </div>
              <div class="play abs">
                <img src="./img/play.png" alt="">
              </div>

            </div>
          </div>
          <div class="vertiv-item swiper-slide two">
            <div class="vertiv-item-box">
              <div class="title abs">
                <img src="./img/page2_title.png" alt="">
              </div>
              <div class="textBox abs">
                <div class="textBox-main">
                  <div class="textBox-title">
                    <img src="./img/page2_text_title.png" alt="">
                  </div>
                  <div class="textBox-cont">
                    <img src="./img/page2_text_content.png" alt="">
                  </div>
                </div>
                <div class="button abs">
                  <img src="./img/button.png" alt="">
                </div>
              </div>
            </div>
          </div>
          <div class="vertiv-item swiper-slide three">
            <div class="vertiv-item-box">
              <div class="content-box">
                <a href="./online.html">
                  <div class="box abs" id='online'>
                    <img src="./img/page5_boxBg.png" alt="">
                  </div>
                  <div class="title abs">
                    <img src="./img/page5_title.png" alt="">
                  </div>
                </a>
              </div>
              <div class="cir abs">
                <img src="./img/page5_cir.png" alt="">
              </div>
            </div>
          </div>
          <div class="vertiv-item swiper-slide four">
            <div class="vertiv-item-box">
              <div class="title abs">
                <img src="./img/page3_title.png" alt="">
              </div>
              <div class="agenda abs">
                <div class="agenda-prev button agenda-wrapper-el"></div>
                <div class="agenda-next button agenda-wrapper-el"></div>
                <div class="swiper-container agenda-wrapper-el" id='agendaSwiper'>
                  <div class="swiper-wrapper agenda-wrapper">
                  </div>
                </div>
                <div class="agenda-list"></div>
              </div>
            </div>
          </div>
          <div class="vertiv-item swiper-slide five">
            <div class="vertiv-item-box">
              <div class="title abs">
                <img src="./img/page4_title.png" alt="">
              </div>
              <div class="review abs">
                <div class="review-prev button abs"></div>
                <div class="review-next button abs"></div>
                <div class="swiper-container" id='reviewSwiper'>
                  <div class="swiper-wrapper review-wrapper">
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-info">
                          <div class="msg">
                            石化行业关键设备和控制系统供电安全
                          </div>
                          <div class="name">
                            ——田军
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-info">
                          <div class="msg">
                            石化行业关键设备和控制系统供电安全
                          </div>
                          <div class="name">
                            ——田军111
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-info">
                          <div class="msg">
                            石化行业关键设备和控制系统供电安全
                          </div>
                          <div class="name">
                            ——田军2323
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-info">
                          <div class="msg">
                            石化行业关键设备和控制系统供电安全
                          </div>
                          <div class="name">
                            ——田军2323
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-info">
                          <div class="msg">
                            石化行业关键设备和控制系统供电安全
                          </div>
                          <div class="name">
                            ——田军2323
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="vertiv-item swiper-slide six">
            <div class="vertiv-item-box">
              <div class="title abs">
                <img src="./img/page6_title.png" alt="">
              </div>
              <div class="review abs">
                <div class="swiper-container" id='reYearSwiper'>
                  <div class="swiper-wrapper review-wrapper">
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-title">
                          sdasdsaddddddxxxxxxxxx
                        </div>
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-title">
                          sdasdsaddddddxxxxxxxxx
                        </div>
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-title">
                          sdasdsaddddddxxxxxxxxx
                        </div>
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-title">
                          sdasdsaddddddxxxxxxxxx
                        </div>
                      </div>
                    </div>
                    <div class="swiper-slide">
                      <div class="review-item">
                        <div class="review-item-img">
                          <img src="" alt="">
                        </div>
                        <div class="review-item-title">
                          sdasdsaddddddxxxxxxxxx
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="reYearNav">
                  <div class="item">
                    2019
                  </div>
                  <div class="item active">
                    2018
                  </div>
                  <div class="item">
                    2017
                  </div>
                  <div class="item">
                    2016
                  </div>
                  <div class="item">
                    2015
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
<script src="./js/jquery.min.js"></script>
<script src="./js/swiper.min.js"></script>

<script>
  "use strict";

  var agendaList = [{
    title: '开场视频',
    time: '14:00-14:02',
    name: '',
    position: ''
  }, {
    title: '主持人开场',
    time: '14:02-14:05',
    name: '晁晋',
    position: '维谛技术大中华区行业销售部高级总监'
  }, {
    title: '《维心聚力·共谛未来》',
    time: '14:05-14:15',
    name: '祝金程',
    position: '维谛技术北亚区总裁'
  }, {
    title: '《坚守底层规律，加速认知升级&能力迭代》',
    time: '14:15-14:55',
    name: '田军',
    position: '维谛技术大中华区市场营销&产品应用副总裁'
  }, {
    title: '荣誉奖颁奖',
    time: '14:55-15:00',
    name: '',
    position: ''
  }, {
    title: '《转危为机，紧抓机遇，与子成说，执手共赢》',
    time: '15:00-15:40',
    name: '崔益彬',
    position: '维谛技术大中华区销售副总裁'
  }, {
    title: '荣誉奖颁奖',
    time: '15:40-15:45',
    name: '',
    position: ''
  }, {
    title: '《以服务粘客户，以合作谋发展》',
    time: '15:45-16:25',
    name: '丁麒钢',
    position: '维谛技术大中华区服务副总裁 '
  }, {
    title: '待定',
    time: '16:25-16:35',
    name: '果巍',
    position: '北京艾瑞信系统工程技术有限责任公司总经理'
  }, {
    title: '《分销销售：小中有大、大有可为》',
    time: '16:35-16:45',
    name: '盛伟',
    position: '杭州雷创科技有限公司总经理'
  }, {
    title: '《整合行业资源 从0到1突破》',
    time: '16:45-16:55',
    name: '谭捷',
    position: '北京意科瑞思能源技术有限公司总经理'
  }, {
    title: '荣誉奖颁奖',
    time: '16:55-17:00',
    name: '',
    position: ''
  }, {
    title: '现场答疑',
    time: '17:00-17:15',
    name: '',
    position: ''
  }, {
    title: '幸运抽奖',
    time: '17:15-17:25',
    name: '',
    position: ''
  }];
  $(function () {
    var isClickNext = false
    var winHeight = window.innerHeight;
    var scale = winHeight / 1080
    if (winHeight < 800) {
      $(".vertiv-item-box").css('transform', 'scale(' + scale + ')')
    }
    if(winHeight > 1080) {
      $('.light-box').css({'transform': 'scale('+scale+')','transform-origin': '100% 100%'})
      $(".vertiv-item-box").css({'transform': 'scale(' + scale + ')'})
    }

    $(".vertiv-item").height(winHeight + 'px');
    var mySwiper = new Swiper('#content', {
      direction: 'vertical',
      // 垂直切换选项
      mousewheel: true,
      //开启滚轮
      height: winHeight,
      slidesPerView: 'auto',
      on: {
        slideChangeTransitionEnd: function slideChangeTransitionEnd() {
          slideChange(this.activeIndex);
        },
        init: function init() {
          slideInit();
        }
      }
    });
    var reviewSwiper = new Swiper('#reviewSwiper', {
      slidesPerView: 3,
      centeredSlides: true,
      centeredSlidesBounds: true,
      centerInsufficientSlides: true,
      spaceBetween: 10,
      slidesOffsetBefore: -45,
      initialSlide: 1,
      navigation: {
        nextEl: '.review-next',
        prevEl: '.review-prev'
      } // loop: true

    }); //  加载议程数据

    var reYearSwiper = new Swiper('#reYearSwiper', {
      slidesPerView: 3,
      centeredSlides: true,
      centeredSlidesBounds: true,
      centerInsufficientSlides: true,
      spaceBetween: -250,
      slidesOffsetBefore: -77,
      initialSlide: 1,
      nested: true,
      on: {
        slideChangeTransitionEnd: function () {
          $('.reYearNav').children(".item").eq(this.activeIndex).addClass("active").siblings().removeClass('active')
        }
      }
    });

    $(".reYearNav").on("click",'.item',function () {
      reYearSwiper.slideTo($(this).index())
    })

    agendaInit(agendaList);
    $('.nav-right').on("click", '.nav-item', function () {
      var $this = $(this);
      var activeIndex = $this.index();
      slideChange(activeIndex, 'nav');
    });

    function agendaInit(agendaList) {
      var num = 9; // 一页最多显示数量
      if(winHeight> 1080){
        num = 10
      }
      var $agendaBox = $('.agenda');

      if (agendaList.length > num) {
        var page = agendaList.length % num > 0 ? parseInt(agendaList.length / num) + 1 : parseInt(agendaList
          .length / num);
        var index = 0;

        for (var i = 0; i < page; i++) {
          var $box = $('<div class="swiper-slide"><div class="agenda-list"></div></div>');
          $box.appendTo('.agenda-wrapper');

          (function ($box, i) {
            var slice = agendaList.slice(i * num, i * num + num);
            slice.forEach(function (res) {
              $box.find('.agenda-list').append(agendaItem(res));
            });
          })($box, i);
        }

        var agendaSwiper = new Swiper('#agendaSwiper', {
          // autoplay: true,
          width: 616,
          // loop: true, // 循环模式选项
          slidesPerView: 'auto',
          navigation: {
            nextEl: '.agenda-next',
            prevEl: '.agenda-prev'
          },
          on: {
            slideNextTransitionStart: function () {
              $('.agenda-next').removeClass('animate')
            }
          }
          
        });
      } else {
        agendaList.forEach(function (res) {
          $(".agenda").children('.agenda-list').append(agendaItem(res));
          $(".agenda-wrapper-el").hide();
        });
      }
    }

    function slideChange(index, type) {
      $(".nav-right").children('div').eq(index).addClass("active").siblings().removeClass("active");
      $('.vertiv-item').eq(index).addClass('animate');

      if (type === 'nav') {
        mySwiper.slideTo(index);
      }

      if(index === 3 && !isClickNext){
        isClickNext = true
        $('.agenda-next').addClass("animate")
      }
    }

    function agendaItem(obj) {
      return ' <div class="agenda-item"> ' + ' <div class="agenda-item-time"> ' + obj.time + '</div>' +
        '<div class="agenda-item-info">' + '<div class="agenda-item-info-title">' + obj.title + '</div>' +
        '<div class="agenda-item-info-person">' + '<div class="name">' + obj.name + '</div>' +
        '<div class="position">' + obj.position + '</div>' + '</div>' + '</div>' + '</div>';
    }

    function slideInit() {
      $('.one').addClass("animate");
      $(".mb").hide();
    }
  });
</script>

</html>